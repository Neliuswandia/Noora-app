{"version":3,"file":"definitions.js","sourceRoot":"","sources":["../../src/definitions.ts"],"names":[],"mappings":"AAAA,wCAAwC","sourcesContent":["/// <reference types=\"@capacitor/cli\" />\n\nimport type { PluginListenerHandle } from '@capacitor/core';\n\ndeclare module '@capacitor/cli' {\n  export interface PluginsConfig {\n    LiveUpdate?: {\n      /**\n       * The app ID is used to identify the app when using [Capawesome Cloud](https://capawesome.io/cloud/).\n       *\n       * This is **NOT** the same as the app identifier (e.g. `com.example.app`).\n       * This is a unique identifier generated by Capawesome Cloud (e.g. `6e351b4f-69a7-415e-a057-4567df7ffe94`).\n       *\n       * @since 5.0.0\n       * @example '6e351b4f-69a7-415e-a057-4567df7ffe94'\n       */\n      appId?: string;\n      /**\n       * Whether or not to automatically delete unused bundles.\n       *\n       * When enabled, the plugin will automatically delete unused bundles after calling `ready()`.\n       *\n       * @since 5.0.0\n       * @default false\n       */\n      autoDeleteBundles?: boolean;\n      /**\n       * The default channel of the app.\n       *\n       * @since 6.3.0\n       * @example 'production'\n       */\n      defaultChannel?: string;\n      /**\n       * The timeout in milliseconds for HTTP requests.\n       *\n       * @since 6.4.0\n       * @default 60000\n       */\n      httpTimeout?: number;\n      /**\n       * The public key to verify the integrity of the bundle.\n       *\n       * The public key must be a PEM-encoded RSA public key.\n       *\n       * @since 6.1.0\n       * @example '-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDodf1SD0OOn6hIlDuKBza0Ed0OqtwyVJwiyjmE9BJaZ7y8ZUfcF+SKmd0l2cDPM45XIg2tAFux5n29uoKyHwSt+6tCi5CJA5Z1/1eZruRRqABLonV77KS3HUtvOgqRLDnKSV89dYZkM++NwmzOPgIF422mvc+VukcVOBfc8/AHQIDAQAB-----END PUBLIC KEY-----'\n       */\n      publicKey?: string;\n      /**\n       * The timeout in milliseconds to wait for the app to be ready\n       * before resetting to the default bundle.\n       *\n       * It is strongly **recommended** to configure this option so that\n       * the plugin can roll back to the default bundle in case of problems.\n       * If configured, the plugin will wait for the app to call the `ready()`\n       * method before resetting to the default bundle.\n       *\n       * Set to `0` to disable the timeout.\n       *\n       * @since 5.0.0\n       * @default 0\n       * @example 10000\n       */\n      readyTimeout?: number;\n      /**\n       * The API domain of the [Capawesome Cloud](https://cloud.capawesome.io) server **without** scheme or path.\n       *\n       * @since 7.0.0\n       * @default 'api.cloud.capawesome.io'\n       * @example 'api.cloud.capawesome.eu'\n       */\n      serverDomain?: string;\n    };\n  }\n}\n\nexport interface LiveUpdatePlugin {\n  /**\n   * Delete a bundle from the app.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  deleteBundle(options: DeleteBundleOptions): Promise<void>;\n  /**\n   * Download a bundle.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  downloadBundle(options: DownloadBundleOptions): Promise<void>;\n  /**\n   * Fetch the latest bundle using the [Capawesome Cloud](https://capawesome.io/cloud/).\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 6.6.0\n   */\n  fetchLatestBundle(\n    options?: FetchLatestBundleOptions,\n  ): Promise<FetchLatestBundleResult>;\n  /**\n   * Get all identifiers of bundles that have been downloaded.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getBundles(): Promise<GetBundlesResult>;\n  /**\n   * Get the channel that is used for the update.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getChannel(): Promise<GetChannelResult>;\n  /**\n   * Get the bundle identifier of the current bundle.\n   * The current bundle is the bundle that is currently used by the app.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 6.7.0\n   */\n  getCurrentBundle(): Promise<GetCurrentBundleResult>;\n  /**\n   * Get the custom identifier of the device.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getCustomId(): Promise<GetCustomIdResult>;\n  /**\n   * Get the unique device identifier.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getDeviceId(): Promise<GetDeviceIdResult>;\n  /**\n   * Get the bundle identifier of the next bundle.\n   * The next bundle is the bundle that will be used after calling `reload()`\n   * or restarting the app.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 6.7.0\n   */\n  getNextBundle(): Promise<GetNextBundleResult>;\n  /**\n   * Get the version code of the app.\n   *\n   * On **Android**, this is the `versionCode` from the `android/app/build.gradle` file.\n   * On **iOS**, this is the `CFBundleVersion` from the `Info.plist` file.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getVersionCode(): Promise<GetVersionCodeResult>;\n  /**\n   * Get the version name of the app.\n   *\n   * On **Android**, this is the `versionName` from the `android/app/build.gradle` file.\n   * On **iOS**, this is the `CFBundleShortVersionString` from the `Info.plist` file.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  getVersionName(): Promise<GetVersionNameResult>;\n  /**\n   * Notify the plugin that the app is ready to use and no rollback is needed.\n   *\n   * **Attention**: This method should be called as soon as the app is ready to use\n   * to prevent the app from being reset to the default bundle.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  ready(): Promise<ReadyResult>;\n  /**\n   * Reload the app to apply the new bundle.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  reload(): Promise<void>;\n  /**\n   * Reset the app to the default bundle.\n   *\n   * Call `reload()` or restart the app to apply the changes.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  reset(): Promise<void>;\n  /**\n   * Set the channel to use for the update.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  setChannel(options: SetChannelOptions): Promise<void>;\n  /**\n   * Set the custom identifier of the device.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  setCustomId(options: SetCustomIdOptions): Promise<void>;\n  /**\n   * Set the next bundle to use for the app.\n   *\n   * Call `reload()` or restart the app to apply the changes.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 6.7.0\n   */\n  setNextBundle(options: SetNextBundleOptions): Promise<void>;\n  /**\n   * Automatically download and set the latest bundle for the app using the [Capawesome Cloud](https://capawesome.io/cloud/).\n   *\n   * Call `reload()` or restart the app to apply the changes.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 5.0.0\n   */\n  sync(options?: SyncOptions): Promise<SyncResult>;\n  /**\n   * Listen for the download progress of a bundle.\n   *\n   * Only available on Android and iOS.\n   *\n   * @since 7.0.0\n   */\n  addListener(\n    eventName: 'downloadBundleProgress',\n    listenerFunc: DownloadBundleProgressListener,\n  ): Promise<PluginListenerHandle>;\n  /**\n   * Remove all listeners for this plugin.\n   *\n   * @since 7.2.0\n   */\n  removeAllListeners(): Promise<void>;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface DeleteBundleOptions {\n  /**\n   * The unique identifier of the bundle to delete.\n   *\n   * @since 5.0.0\n   * @example '1.0.0'\n   */\n  bundleId: string;\n}\n\nexport interface DownloadBundleOptions {\n  /**\n   * The artifact type of the bundle.\n   *\n   * @since 6.6.0\n   * @default 'zip'\n   * @example 'manifest'\n   */\n  artifactType?: 'manifest' | 'zip';\n  /**\n   * The unique identifier of the bundle.\n   *\n   * **Attention**: The value `public` is reserved and cannot be used as a bundle identifier.\n   *\n   * @since 5.0.0\n   * @example '1.0.0'\n   */\n  bundleId: string;\n  /**\n   * The checksum of the self-hosted bundle as a SHA-256 hash\n   * in base64 format to verify the integrity of the bundle.\n   *\n   * **Attention**: Only supported for the `zip` artifact type.\n   *\n   * @since 7.1.0\n   */\n  checksum?: string;\n  /**\n   * The signature of the self-hosted bundle as a signed SHA-256 hash\n   * in base64 format to verify the integrity of the bundle.\n   *\n   * **Attention**: Only supported for the `zip` artifact type.\n   *\n   * @since 7.1.0\n   */\n  signature?: string;\n  /**\n   * The URL of the bundle to download.\n   *\n   * For the `zip` artifact type, the URL must point to a ZIP file.\n   * For the `manifest` artifact type, the URL serves as the base URL\n   * to download the individual files. For example, if the URL is\n   * `https://example.com/download`, the plugin will download the file\n   * with the href `index.html` from `https://example.com/download?href=index.html`.\n   *\n   * To **verify the integrity** of the file, the server should return\n   * a `X-Checksum` header with the SHA-256 hash in base64 format.\n   *\n   * To **verify the signature** of the file, the server should return\n   * a `X-Signature` header with the signed SHA-256 hash in base64 format.\n   *\n   * @since 5.0.0\n   * @example 'https://example.com/bundle.zip'\n   */\n  url: string;\n}\n\n/**\n * @since 6.7.0\n */\nexport interface FetchLatestBundleOptions {\n  /**\n   * The name of the channel where the latest bundle is fetched from.\n   *\n   * @since 6.7.0\n   */\n  channel?: string;\n}\n\n/**\n * @since 6.6.0\n */\nexport interface FetchLatestBundleResult {\n  /**\n   * The artifact type of the bundle.\n   *\n   * @since 6.7.0\n   */\n  artifactType?: 'manifest' | 'zip';\n  /**\n   * The unique identifier of the latest bundle.\n   *\n   * If `null`, no bundle is available.\n   *\n   * @since 6.6.0\n   */\n  bundleId: string | null;\n  /**\n   * The checksum of the latest bundle if the bundle is self-hosted.\n   *\n   * If the bundle is hosted on Capawesome Cloud, the checksum will be\n   * returned as response header when downloading the bundle.\n   *\n   * @since 7.1.0\n   */\n  checksum?: string;\n  /**\n   * Custom properties that are associated with the latest bundle.\n   *\n   * @since 7.0.0\n   * @example { \"key\": \"value\" }\n   */\n  customProperties?: { [key: string]: string };\n  /**\n   * The URL of the latest bundle to download.\n   * Pass this URL to the `downloadBundle(...)` method to download the bundle.\n   *\n   * @since 6.7.0\n   */\n  downloadUrl?: string;\n  /**\n   * The signature of the latest bundle if the bundle is self-hosted.\n   *\n   * If the bundle is hosted on Capawesome Cloud, the signature will be\n   * returned as response header when downloading the bundle.\n   *\n   * @since 7.1.0\n   */\n  signature?: string;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetBundleResult {\n  /**\n   * The unique identifier of the active bundle.\n   *\n   * If `null`, the default bundle is being used.\n   *\n   * @since 5.0.0\n   * @example '1.0.0'\n   */\n  bundleId: string | null;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetBundlesResult {\n  /**\n   * An array of unique identifiers of all available bundles.\n   *\n   * @since 5.0.0\n   */\n  bundleIds: string[];\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetChannelResult {\n  /**\n   * The channel name.\n   *\n   * If `null`, the app is using the default channel.\n   *\n   * @since 5.0.0\n   * @example 'production'\n   */\n  channel: string | null;\n}\n\n/**\n * @since 6.7.0\n */\nexport interface GetCurrentBundleResult {\n  /**\n   * The unique identifier of the current bundle.\n   *\n   * If `null`, the default bundle is being used.\n   *\n   * @since 6.7.0\n   */\n  bundleId: string | null;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetDeviceIdResult {\n  /**\n   * The unique identifier of the device.\n   *\n   * On iOS, [`identifierForVendor`](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor) is used.\n   * The value of this property is the same for apps that come from the same vendor running on the same device.\n   *\n   * @since 5.0.0\n   *\n   * @example '50d2a548-80b7-4dad-adc7-97c0e79d8a89'\n   */\n  deviceId: string;\n}\n\n/**\n * @since 6.7.0\n */\nexport interface GetNextBundleResult {\n  /**\n   * The unique identifier of the next bundle.\n   *\n   * If `null`, the default bundle is being used.\n   *\n   * @since 6.7.0\n   */\n  bundleId: string | null;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetVersionCodeResult {\n  /**\n   * The version code of the app.\n   *\n   * On **Android**, this is the `versionCode` from the `android/app/build.gradle` file.\n   * On **iOS**, this is the `CFBundleVersion` from the `Info.plist` file.\n   *\n   * @since 5.0.0\n   * @example \"1\"\n   */\n  versionCode: string;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetVersionNameResult {\n  /**\n   * The version name of the app.\n   *\n   * On **Android**, this is the `versionName` from the `android/app/build.gradle` file.\n   * On **iOS**, this is the `CFBundleShortVersionString` from the `Info.plist` file.\n   *\n   * @since 5.0.0\n   * @example \"1.0.0\"\n   */\n  versionName: string;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface GetCustomIdResult {\n  /**\n   * The custom identifier of the device.\n   *\n   * If `null`, no custom identifier is set.\n   *\n   * @since 5.0.0\n   * @example '50d2a548-80b7-4dad-adc7-97c0e79d8a89'\n   */\n  customId: string | null;\n}\n\n/**\n * @since 7.0.0\n */\nexport interface ReadyResult {\n  /**\n   * The identifier of the previous bundle used.\n   *\n   * If `null`, the default bundle was used.\n   *\n   * @since 7.0.0\n   */\n  previousBundleId: string | null;\n  /**\n   * The identifier of the current bundle used.\n   *\n   * If `null`, the default bundle is being used.\n   *\n   * @since 7.0.0\n   */\n  currentBundleId: string | null;\n  /**\n   * Whether or not the app was reset to the default bundle.\n   *\n   * @since 7.0.0\n   */\n  rollback: boolean;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface SetBundleOptions {\n  /**\n   * The unique identifier of the bundle to use.\n   *\n   * @since 5.0.0\n   * @example '1.0.0'\n   */\n  bundleId: string;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface SetChannelOptions {\n  /**\n   * The channel name.\n   *\n   * Set `null` to remove the channel.\n   *\n   * @since 5.0.0\n   */\n  channel: string | null;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface SetCustomIdOptions {\n  /**\n   * The custom identifier of the device.\n   *\n   * Set `null` to remove the custom identifier.\n   *\n   * @since 5.0.0\n   */\n  customId: string | null;\n}\n\n/**\n * @since 6.7.0\n */\nexport interface SetNextBundleOptions {\n  /**\n   * The unique identifier of the bundle to use.\n   *\n   * Set `null` to use the default bundle (same as calling `reset()`).\n   *\n   * @since 6.7.0\n   * @example '1.0.0'\n   */\n  bundleId: string | null;\n}\n\n/**\n * @since 6.7.0\n */\nexport interface SyncOptions {\n  /**\n   * The name of the channel where the latest bundle is fetched from.\n   *\n   * @since 6.7.0\n   */\n  channel?: string;\n}\n\n/**\n * @since 5.0.0\n */\nexport interface SyncResult {\n  /**\n   * The identifier of the next bundle to use.\n   *\n   * If `null`, the app is up-to-date and no new bundle is available.\n   *\n   * @since 5.0.0\n   */\n  nextBundleId: string | null;\n}\n\n/**\n * Listener for the download progress of a bundle.\n *\n * @since 7.0.0\n */\nexport type DownloadBundleProgressListener = (\n  event: DownloadBundleProgressEvent,\n) => void;\n\n/**\n * Event that is triggered when the download progress of a bundle changes.\n *\n * @since 7.0.0\n */\nexport interface DownloadBundleProgressEvent {\n  /**\n   * The unique identifier of the bundle that is being downloaded.\n   *\n   * @since 7.0.0\n   */\n  bundleId: string;\n  /**\n   * The number of bytes that have been downloaded.\n   *\n   * @since 7.0.0\n   */\n  downloadedBytes: number;\n  /**\n   * The progress of the download in percent as a value between `0` and `1`.\n   *\n   * @since 7.0.0\n   * @example 0.5\n   */\n  progress: number;\n  /**\n   * The total number of bytes to download.\n   *\n   * @since 7.0.0\n   */\n  totalBytes: number;\n}\n"]}